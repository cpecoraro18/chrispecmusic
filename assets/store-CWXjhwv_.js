import{_ as m,c as a,a as s,F as g,h as y,g as c,e as u,d as h,o as r}from"./entry-hg7RBPBW.js";const k={data(){return{photos:[],modalPhoto:null,token:null,loadingPhotos:!1,loadingBuy:!1}},mounted(){this.fetchPhotos()},methods:{async fetchPhotos(){this.loadingPhotos=!0;try{var l="https://api.chrispecmusic.com/photos";this.token&&(l+=`?token=${this.token}`);const n=await(await fetch(l)).json();n.images&&(this.photos=n.images.map(i=>({name:i.split("/").pop(),src:i}))),n.token&&(this.token=n.token)}catch(o){console.error("Error fetching photos:",o)}finally{this.loadingPhotos=!1}},openModal(l){this.modalPhoto=l},async downloadPhoto(l){this.loadingBuy=!0;const o=l.split("/").pop();try{const i=await(await fetch("https://api.chrispecmusic.com/photo/buy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageId:o})})).json();i.url?window.open(i.url,"_blank"):console.error("No URL returned from server")}catch(n){console.error("Error starting checkout:",n)}finally{this.loadingBuy=!1}}}},v={class:"container py-5"},P={class:"row g-4"},w={class:"card shadow-sm position-relative group"},b=["src","alt","onClick"],_={class:"photo-actions"},B=["href"],x=["onClick"],C={key:0,class:"text-center py-4"},F={key:1,class:"col-12 text-center mt-4"},N={class:"modal-dialog modal-dialog-centered"},j={class:"modal-content bg-transparent border-0"},M=["src","alt"],R=["href"],T={key:1,class:"loading-overlay"};function D(l,o,n,i,t,d){return r(),a("div",v,[o[9]||(o[9]=s("h2",{class:"mb-4"},"Photo Gallery",-1)),o[10]||(o[10]=s("p",{class:"mb-5"},"Purchasing a download supports future photography and music projects. Thank you for your support!",-1)),s("div",P,[(r(!0),a(g,null,y(t.photos,(e,p)=>(r(),a("div",{key:p,class:"col-6 col-md-4 col-lg-3"},[s("div",w,[s("img",{src:e.src,alt:e.name,class:"card-img-top rounded",onClick:f=>d.openModal(e),style:{cursor:"pointer"}},null,8,b),s("div",_,[s("a",{href:e.src,download:"",class:"action-icon",title:"Download"},o[3]||(o[3]=[s("i",{class:"fas fa-download"},null,-1)]),8,B),s("a",{role:"button",class:"action-icon",title:"Buy Full Resolution",onClick:u(f=>d.downloadPhoto(e.src),["prevent"])},o[4]||(o[4]=[s("i",{class:"fas fa-shopping-cart"},null,-1)]),8,x)])])]))),128)),t.loadingPhotos?(r(),a("div",C,o[5]||(o[5]=[s("i",{class:"fa fa-spinner fa-spin fa-2x"},null,-1)]))):c("",!0),t.token?(r(),a("div",F,[s("button",{class:"btn btn-outline-light",onClick:o[0]||(o[0]=u((...e)=>d.fetchPhotos&&d.fetchPhotos(...e),["prevent"]))}," Load More Photos ")])):c("",!0)]),t.modalPhoto?(r(),a("div",{key:0,class:"modal fade show d-block",tabindex:"-1",style:{"background-color":"rgba(0, 0, 0, 0.75)"},onClick:o[2]||(o[2]=e=>t.modalPhoto=null)},[s("div",N,[s("div",j,[s("img",{src:t.modalPhoto.src,alt:t.modalPhoto.name,class:"img-fluid rounded custom-modal-image"},null,8,M),s("div",null,[s("a",{href:t.modalPhoto.src,download:"",class:"btn btn-outline-light mt-2 me-2",title:"Download"},o[6]||(o[6]=[s("i",{class:"fas fa-download"},null,-1),h(" Download ")]),8,R),s("a",{role:"button",class:"btn btn-success mt-2",title:"Buy Full Resolution",onClick:o[1]||(o[1]=u(e=>d.downloadPhoto(t.modalPhoto.src),["prevent"]))},o[7]||(o[7]=[s("i",{class:"fas fa-shopping-cart"},null,-1),h(" Buy Full Resolution ")]))])])])])):c("",!0),t.loadingBuy?(r(),a("div",T,o[8]||(o[8]=[s("i",{class:"fa fa-spinner fa-spin fa-2x"},null,-1)]))):c("",!0)])}const L=m(k,[["render",D]]);export{L as default};
