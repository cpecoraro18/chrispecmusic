import{_ as $,r as _,l as C,q as D,o as i,c as l,a as e,n as k,i as x,g as p,F as L,f as F,t as r,d as B}from"./entry-D26AhkPo.js";const I={class:"mt-5 bg-dark text-white p-4 rounded"},O={class:"mb-3"},R={class:"btn-group me-2",role:"group"},A={class:"dropdown-menu"},P={key:0,class:"text-center py-4"},U={key:1,class:"list-group"},V={class:"row border-bottom border-1 pb-3"},Y={class:"col-12 col-md-2 mb-4 mb-md-0"},q={class:"mb-1"},M={class:"text-muted"},W={class:"text-muted mb-0"},z={class:"col-12 col-md-10 text-md-end"},J={class:"mb-2"},j={class:"mb-2 text-info small"},G=["href"],H={key:0,class:"mb-0"},K={key:0,class:"text-center mt-3"},Q={key:2,class:"text-muted text-center"},X={__name:"EventsList",props:{limit:{type:Number,default:1/0}},setup(v){const S=v,u=_([]),d=_(!0),g=_("future");async function m(n=null,t=null){let s="https://api.chrispecmusic.com/events";const c=new URLSearchParams;n&&c.append("timeMin",n),t&&c.append("timeMax",t),c.toString()&&(s+="?"+c.toString());const N=await $fetch(s);u.value=JSON.parse(N).items.map(o=>{var w,y;const a=(w=o.start)!=null&&w.dateTime?new Date(o.start.dateTime):null,h=(y=o.end)!=null&&y.dateTime?new Date(o.end.dateTime):null;return{id:o.id,summary:o.summary,location:o.location||"TBD",description:o.description||"",date:a?a.getDate():"N/A",month:a?a.toLocaleString("default",{month:"long"}):"N/A",year:a?a.getFullYear():"N/A",timeRange:a&&h?`${a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} - ${h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:"Time not available"}}),d.value=!1}const T=C(()=>u.value.slice(0,S.limit));function b(n=null){if(n){const t=`${n}-01-01`,s=`${n}-12-31`;return m(t,s)}else{const t=new Date().toISOString().split("T")[0];return m(null,t)}}function E(){return m()}async function f(n){if(g.value=n,d.value=!0,n.startsWith("past-")){const t=n.split("-")[1];await b(t)}else switch(n){case"past":await b();break;case"future":default:await E();break}}return D(()=>{m()}),(n,t)=>(i(),l("div",I,[t[6]||(t[6]=e("h2",{class:"mb-4 text-center"},"Events",-1)),e("div",O,[e("button",{class:k(["btn btn-outline-light btn-sm me-2",{active:g.value==="future"}]),onClick:t[0]||(t[0]=s=>f("future"))}," Upcoming ",2),e("div",R,[e("button",{class:k(["btn btn-outline-light btn-sm dropdown-toggle",{active:g.value.startsWith("past")}]),type:"button","data-bs-toggle":"dropdown"}," Past Events ",2),e("ul",A,[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:t[1]||(t[1]=x(s=>f("past-2025"),["prevent"]))},"2025")]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:t[2]||(t[2]=x(s=>f("past-2024"),["prevent"]))},"2024")])])])]),d.value?(i(),l("div",P,t[3]||(t[3]=[e("i",{class:"fa fa-spinner fa-spin fa-2x"},null,-1)]))):p("",!0),!d.value&&u.value.length?(i(),l("div",U,[(i(!0),l(L,null,F(T.value,(s,c)=>(i(),l("div",{key:s.id,class:"list-group-item mb-3 bg-dark border-0"},[e("div",V,[e("div",Y,[e("h4",q,r(s.date),1),e("p",M,r(s.month)+" "+r(s.year),1),e("p",W,r(s.timeRange),1)]),e("div",z,[e("h4",J,r(s.summary),1),e("div",j,[e("a",{href:"https://www.google.com/maps/search/?api=1&query="+encodeURIComponent(s.location),target:"_blank"},[t[4]||(t[4]=e("i",{class:"fa fa-map-marker me-2"},null,-1)),B(r(s.location.split(",")[0]),1)],8,G)]),s.description?(i(),l("p",H,r(s.description),1)):p("",!0)])])]))),128)),u.value.length>v.limit?(i(),l("div",K,t[5]||(t[5]=[e("a",{href:"/events",class:"text-info"},"See all",-1)]))):p("",!0)])):d.value?p("",!0):(i(),l("p",Q,"No upcoming events."))]))}},tt=$(X,[["__scopeId","data-v-19162804"]]);export{tt as _};
